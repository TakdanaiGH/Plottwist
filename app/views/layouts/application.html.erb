<!DOCTYPE html>
<html>
<head>
  <title>Plot Twist</title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <!-- Include CSS specific to this layout -->
  <%= stylesheet_link_tag 'layout', media: 'all' %>
  
  <!-- Include global application CSS -->
  <%= stylesheet_link_tag 'application', media: 'all' %>

  <%= javascript_importmap_tags %>
</head>
<body>
  <!-- Navbar -->
  <div class="navbar">
    <!-- Brand Logo and Name -->
    <a href="<%= root_path %>" class="brand">
      <!-- Circle Logo -->
      <img src="/images/pt_commuity.png" class="logo">
      Plot Twist
    </a>
    <div class="menu">
      <a href="<%= root_path %>">Home</a>
      <a href="<%= ebooks_path %>">Ebooks</a>
      <a href="<%= communities_path %>">Community</a>

      <% if user_signed_in? %>
        <!-- Display profile picture and name when logged in -->
        <div class="profile">
          <a href="<%= edit_user_registration_path %>">
            <% if current_user.profile_picture.present? %>
              <img src="<%= url_for(current_user.profile_picture) %>" alt="Profile Picture" class="profile-pic" />
            <% else %>
              <img src="images/moodeng.png" alt="Profile Picture" class="profile-pic" />
            <% end %>
            <span><%= current_user.name || "Profile" %></span>
          </a>
          <!-- Logout Button -->
          <%= button_to "Logout", destroy_user_session_path, method: :delete, class: "logout-btn", data: { turbo: false } %>
        </div>
      <% else %>
        <!-- Display Login button when not logged in -->
        <a href="<%= new_user_session_path %>" class="login-btn">Login</a>
      <% end %>
    </div>
  </div>

  <!-- Page-specific content -->
  <%= yield %>
</body>
</html>
