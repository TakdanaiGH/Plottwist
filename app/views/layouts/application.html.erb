<!DOCTYPE html>
<html>
<head>
  <title>Plot Twist</title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <!-- Include CSS specific to this layout -->
  <%= stylesheet_link_tag 'layout', media: 'all' %>
  
  <!-- Include global application CSS -->
  <%= stylesheet_link_tag 'application', media: 'all' %>

  <%= javascript_importmap_tags %>
</head>
<body>
  <!-- Navbar -->
  <div class="header">
    <!-- Brand Logo and Name -->
    <div class="logo-section">
      <a href="<%= root_path %>" class="brand">
        <div class="logo">
          <img src="/images/logo_header.png" class="logo" />
        </div>
        <span class="brand-name">PLOT_TWIST COMMUNITY</span>
      </a>
    </div>
    <!-- Navigation Menu -->
    <div class="navbar">
      <a href="<%= root_path %>" class="active">Home</a>
      <a href="<%= ebooks_path %>">Ebooks</a>
      <a href="<%= communities_path %>">Community</a>
    </div>
    <!-- Profile or Login -->
    <div class="login-container">
      <% if user_signed_in? %>
        <div class="profile">
          <a href="<%= edit_user_registration_path %>">
            <% if current_user.profile_picture.present? %>
              <img src="<%= url_for(current_user.profile_picture) %>" alt="Profile Picture" class="profile-pic" />
            <% else %>
              <img src="/images/moodeng.png" alt="Default Profile Picture" class="profile-pic" />
            <% end %>
            <span class="profile-name"><%= current_user.name || "Profile" %></span>
          </a>
          <!-- Logout Button -->
          <%= button_to "Logout", destroy_user_session_path, method: :delete, class: "logout-btn", data: { turbo: false } %>
        </div>
      <% else %>
        <a href="<%= new_user_session_path %>" class="login-btn">Login</a>
      <% end %>
    </div>
  </div>

  <!-- Page-specific content -->
  <%= yield %>
</body>
</html>